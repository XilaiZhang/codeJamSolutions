beamingWithJoy.cpp: Almost 300 lines of code, and non trivial to debug. I attached a simple python script (I named it test_cases_generator.py) that produce sample test cases to this problem. To debug your program, you can run this python script many times and compare the output from your program with the output from my program (beamingWithJoy.cpp) . I guarantee that my program is correct, and the other programs on the internet could be wrong (they might pass codejam judge but produce wrong outputs!) Here is how I solved this problem: For each laser, check if putting it horizontally or vertically will destroy another laser emitter, if so, avoid the positioning. For each ".", i.e., for each empty cell, if there is only one laser passing through it, add the empty cell into a set S. Now, for each cell C in S, try to fix the laser to the expected direction required by C. If we can't fix the only source of laser (because someone else requires it to be in another direction), arrangements are impossible. After fulfilling the requirement of C, some other empty cells might be affected and now become qualified for S. If so, add any such cell (which previously has two laser sources that could potentially pass through it, but now has only one laser source passing through it) into S. Repeat the process until S is empty. Now, all we have left are empty cells that could have two laser emitter passing through it. For these cells, we apply 2 satisfiability algorithms (find SCC (strongly connected components), and assgin topological order) to assign the correct directions for them. 
